---
title: Portal update — Hue timeline, ripple optimizations, phone persistence
date: 2025-11-07
tags: [portal, hue, ripples, performance, phone, persistence]
---

# Summary

- Global Hue timeline added (fixed speed, 45s cycle) with Timeline scrub + Play/Pause.
- Hue applies to GL overlay, GL background bubbles, navigation, rising bubbles, background, Errl.
- Ripple system optimized: capped rings, cached texture, fade/expire, reduced GPU load.
- Phone wiring restored and extended: GL Orbs, Nav Goo, Vignette, Shimmer.
- Persistence: GL overlay, GL bubbles, Nav Goo, Rising Bubbles, Classic Goo; Hue layers snapshot. Quick-save: Shift+S.

# Details

## Hue
- Controller now runs a master timeline (`tickMaster`) applying a unified hue across all layers.
- Late registration bridges WebGL refs even if init order varies.
- UI: replaced speed/mode controls with `Timeline` (0–360) and `Play/Pause`.

## Ripples (RB)
- Start small → expand a few levels → fade out → remove.
- Max 3 rings at once; alpha decay; cached radial texture to avoid per-frame gradients.

## Phone persistence
- Overlay → `errl_gl_overlay`
- GL bubbles → `errl_gl_bubbles`
- Nav Goo → `errl_nav_goo_cfg`
- Rising Bubbles → `errl_rb_settings`
- Classic Goo → `errl_goo_cfg`
- Hue layers → `errl_hue_layers` (also saved by Shift+S and “Save Defaults”).

## UI additions
- Developer Tools: `Save Defaults` and `Reset Defaults` (localStorage).

# Next actions
- Register missing DOM selectors for full Hue coverage (list any that don’t shift yet).
- Persist Nav layout, Errl Goo more deeply, RB advanced per-layer textures.
- Add “Save as preset / Load preset” per tab.
- FPS guard: temporarily downshift RB density during active ripples on slow frames.
- Documentation pass: README/WARP, troubleshooting.

# Verification checklist
- Timeline scrub affects all visible layers; Pause stops animation.
- Ripples fade and disappear; no long-term GPU growth.
- Reload keeps your current look.

