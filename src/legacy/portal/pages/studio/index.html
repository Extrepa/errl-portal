<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Errl Studio Hub</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../../../fx/errl-bg.css" />
    <style>
      :root {
        --studio-bg: #05050a;
        --studio-text: #e7ecff;
        --studio-muted: #9aa7c9;
        --studio-pill-gradient: linear-gradient(135deg, #9ea9ff 0%, #c2c8ff 50%, #9ea9ff 100%);
        --studio-card-gradient: linear-gradient(145deg, rgba(22, 26, 42, 0.95) 0%, rgba(12, 16, 28, 0.95) 45%, rgba(14, 18, 32, 0.95) 100%);
        --studio-card-border: rgba(114, 147, 255, 0.25);
        --studio-shadow: 0 18px 42px rgba(2, 6, 22, 0.6);
        --studio-radius: 24px;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        min-height: 100%;
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #04060f;
        color: #f1f5ff;
      }

      .errl-header {
        position: sticky;
        top: 0;
        width: 100%;
        background:
          linear-gradient(135deg, rgba(220, 220, 240, 0.95) 0%, rgba(180, 180, 200, 0.9) 25%, rgba(160, 160, 180, 0.9) 50%, rgba(180, 180, 200, 0.9) 75%, rgba(220, 220, 240, 0.95) 100%),
          linear-gradient(45deg, rgba(255, 255, 255, 0.3) 0%, transparent 30%, transparent 70%, rgba(255, 255, 255, 0.3) 100%);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 -1px 0 rgba(0, 0, 0, 0.2) inset;
        border-bottom: 1px solid rgba(120, 120, 140, 0.6);
        padding: 0.75rem 1rem;
        z-index: 999;
        letter-spacing: -0.03em;
        backdrop-filter: blur(10px);
      }

      .errl-header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        max-width: 1200px;
        margin: 0 auto;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .errl-home-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: #fff;
        background: linear-gradient(135deg, #ff0080 0%, #8000ff 25%, #0080ff 50%, #00ff80 75%, #ff8000 100%);
        background-size: 200% 200%;
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 999px;
        font-size: 0.8rem;
        font-weight: 600;
        line-height: 1;
        padding: 0.55rem 0.9rem 0.6rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
        text-decoration: none;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        animation: rainbow-flow 3s linear infinite;
      }

      @keyframes rainbow-flow {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @media (max-width: 640px) {
        .errl-home-btn {
          width: 38px;
          height: 38px;
          padding: 0;
          border-radius: 999px;
          display: inline-grid;
          place-items: center;
          overflow: hidden;
          font-size: 0;
        }

        .errl-home-btn::before {
          content: "←";
          font-size: 16px;
          line-height: 1;
          filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8));
        }
      }

      .errl-nav {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        flex-wrap: wrap;
      }

      .errl-bubble-btn {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 6.5rem;
        padding: 0.6rem 0.9rem 0.7rem;
        border-radius: 999px;
        font-size: 0.8rem;
        font-weight: 600;
        text-align: center;
        color: #e8e8e8;
        text-decoration: none;
        white-space: nowrap;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
        background:
          linear-gradient(135deg, rgba(100, 100, 120, 0.9) 0%, rgba(60, 60, 80, 0.9) 25%, rgba(40, 40, 60, 0.9) 50%, rgba(60, 60, 80, 0.9) 75%, rgba(100, 100, 120, 0.9) 100%),
          linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, transparent 30%, transparent 70%, rgba(255, 255, 255, 0.1) 100%);
        border: 2px solid transparent;
        background-clip: padding-box;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.2) inset, 0 -1px 0 rgba(0, 0, 0, 0.3) inset;
      }

      .errl-bubble-btn::before {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: 999px;
        padding: 2px;
        background: linear-gradient(90deg, rgba(0, 255, 255, 0.6) 0%, rgba(255, 0, 255, 0.6) 25%, rgba(255, 255, 0, 0.6) 50%, rgba(0, 255, 0, 0.6) 75%, rgba(0, 255, 255, 0.6) 100%);
        background-size: 200% 100%;
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: xor;
        -webkit-mask-composite: xor;
        animation: led-flow 2s linear infinite;
        opacity: 0.7;
      }

      @keyframes led-flow {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 200% 50%;
        }
      }

      .errl-bubble-btn.active {
        background:
          linear-gradient(135deg, rgba(140, 140, 160, 0.95) 0%, rgba(100, 100, 130, 0.95) 25%, rgba(80, 80, 110, 0.95) 50%, rgba(100, 100, 130, 0.95) 75%, rgba(140, 140, 160, 0.95) 100%),
          linear-gradient(45deg, rgba(255, 255, 255, 0.2) 0%, transparent 30%, transparent 70%, rgba(255, 255, 255, 0.2) 100%);
        color: #fff;
        font-weight: 700;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4), 0 1px 0 rgba(255, 255, 255, 0.3) inset, 0 -1px 0 rgba(0, 0, 0, 0.4) inset;
      }

      main {
        background: var(--studio-bg);
        color: var(--studio-text);
      }

      .studio-container {
        max-width: 1080px;
        margin: 0 auto;
        padding: 72px 32px 120px;
        display: flex;
        flex-direction: column;
        gap: 56px;
      }

      .studio-header {
        display: flex;
        flex-direction: column;
        gap: 32px;
      }

      .studio-header__pill {
        align-self: flex-start;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 18px;
        border-radius: 999px;
        background: var(--studio-pill-gradient);
        color: #0d1230;
        font-size: 11px;
        letter-spacing: 0.32em;
        text-transform: uppercase;
        font-weight: 600;
        box-shadow: 0 10px 24px rgba(46, 58, 136, 0.45);
      }

      .studio-header__body {
        display: flex;
        gap: 32px;
        align-items: flex-end;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      .studio-header__copy {
        max-width: 640px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .studio-header__title {
        margin: 0;
        font-size: clamp(2.5rem, 4vw, 3.25rem);
        font-weight: 700;
        letter-spacing: -0.02em;
      }

      .studio-header__subtitle {
        margin: 0;
        font-size: 1.05rem;
        color: var(--studio-muted);
        line-height: 1.65;
      }

      .studio-header__meta {
        min-width: 240px;
        max-width: 320px;
        padding: 20px 24px;
        border-radius: 20px;
        border: 1px solid rgba(148, 174, 255, 0.28);
        background: linear-gradient(145deg, rgba(22, 28, 45, 0.92), rgba(14, 20, 38, 0.88));
        box-shadow: 0 12px 32px rgba(28, 40, 95, 0.35);
      }

      .studio-header__meta-title {
        margin: 0 0 8px;
        font-weight: 600;
        color: #d2dcff;
        text-transform: uppercase;
        font-size: 0.78rem;
        letter-spacing: 0.18em;
      }

      .studio-header__meta p {
        margin: 0;
        color: #c5d4ff;
        font-size: 0.95rem;
        line-height: 1.6;
      }

      .studio-card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 28px;
      }

      .studio-card__link {
        text-decoration: none;
        display: block;
        height: 100%;
        color: inherit;
      }

      .studio-card {
        height: 100%;
        padding: 28px 28px 24px;
        border-radius: var(--studio-radius);
        background: var(--studio-card-gradient);
        border: 1px solid var(--studio-card-border);
        box-shadow: var(--studio-shadow);
        display: flex;
        flex-direction: column;
        gap: 18px;
        transition: transform 180ms ease, box-shadow 180ms ease, border-color 180ms ease;
      }

      .studio-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 22px 48px rgba(18, 24, 56, 0.65);
        border-color: rgba(159, 190, 255, 0.45);
      }

      .studio-card__header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 12px;
      }

      .studio-card__title {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
        letter-spacing: -0.01em;
      }

      .studio-card__badge {
        display: inline-flex;
        align-items: center;
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 0.7rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        font-weight: 600;
      }

      .studio-card__badge--available {
        background: rgba(46, 197, 122, 0.15);
        color: #7cf4ba;
        border: 1px solid rgba(110, 255, 183, 0.35);
      }

      .studio-card__badge--legacy {
        background: rgba(64, 156, 255, 0.16);
        color: #92c7ff;
        border: 1px solid rgba(132, 188, 255, 0.38);
      }

      .studio-card__badge--planned {
        background: rgba(255, 188, 82, 0.15);
        color: #ffdb96;
        border: 1px solid rgba(255, 214, 140, 0.36);
      }

      .studio-card__description {
        margin: 0;
        color: var(--studio-muted);
        font-size: 0.97rem;
        line-height: 1.65;
        flex: 1;
      }

      .studio-card__cta {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 0.92rem;
        color: #d9e3ff;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .studio-card__cta::after {
        content: "↗";
        font-size: 1rem;
      }

      .studio-card--disabled {
        opacity: 0.55;
        pointer-events: none;
      }

      .studio-card--disabled .studio-card__cta::after {
        content: "…";
      }

      .studio-roadmap {
        border-radius: var(--studio-radius);
        border: 1px solid rgba(148, 174, 255, 0.2);
        background: linear-gradient(150deg, rgba(14, 18, 34, 0.92), rgba(10, 14, 28, 0.88));
        box-shadow: 0 12px 38px rgba(16, 20, 44, 0.55);
        padding: 28px 32px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .studio-roadmap__title {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
      }

      .studio-roadmap ul {
        margin: 0;
        padding-left: 20px;
        color: #c3d3ff;
        line-height: 1.7;
      }

      @media (max-width: 900px) {
        .studio-container {
          padding: 56px 24px 92px;
        }

        .studio-header__body {
          flex-direction: column;
          align-items: flex-start;
        }

        .studio-header__meta {
          width: 100%;
        }
      }

      @media (max-width: 620px) {
        .studio-container {
          padding: 48px 20px 80px;
          gap: 40px;
        }

        .studio-card-grid {
          grid-template-columns: 1fr;
        }

        .studio-header__subtitle {
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <header class="errl-header">
      <div class="errl-header-content">
        <a class="errl-home-btn" data-portal-link="index.html" href="/legacy/portal/index.html">← Back to Portal</a>
        <nav class="errl-nav">
          <a class="errl-bubble-btn" data-portal-link="pages/about/index.html" href="/legacy/portal/pages/about/index.html">About Errl</a>
          <a class="errl-bubble-btn" data-portal-link="pages/gallery/index.html" href="/legacy/portal/pages/gallery/index.html">Gallery</a>
          <a class="errl-bubble-btn" data-portal-link="pages/assets/index.html" href="/legacy/portal/pages/assets/index.html">Assets</a>
          <a class="errl-bubble-btn active" href="#studio">Studio</a>
          <a class="errl-bubble-btn" href="/studio/pin-designer">Design</a>
          <a class="errl-bubble-btn" data-portal-link="pages/events/index.html" href="/legacy/portal/pages/events/index.html">Events</a>
          <a class="errl-bubble-btn" data-portal-link="pages/merch/index.html" href="/legacy/portal/pages/merch/index.html">Merch</a>
        </nav>
      </div>
    </header>

    <main>
      <div class="studio-container">
        <header class="studio-header" id="studio">
          <span class="studio-header__pill">Errl Studio Hub</span>
          <div class="studio-header__body">
            <div class="studio-header__copy">
              <h1 class="studio-header__title">Choose your Errl Lab</h1>
              <p class="studio-header__subtitle">
                Launch the live code playground, explore legacy experiments, or prep assets for the next show. Everything here shares the same project storage and asset pipeline as we finish the merge.
              </p>
            </div>
            <aside class="studio-header__meta">
              <p class="studio-header__meta-title">In Progress</p>
              <p>
                Code Lab already uses the shared asset store. We’re wiring Math Lab, Shape Madness, and the Pin Designer to the same backbone next.
              </p>
            </aside>
          </div>
        </header>

        <section class="studio-card-grid">
          <a class="studio-card__link" href="/studio/code-lab">
            <div class="studio-card">
              <div class="studio-card__header">
                <h3 class="studio-card__title">Code Lab</h3>
                <span class="studio-card__badge studio-card__badge--available">Ready</span>
              </div>
              <p class="studio-card__description">
                Full Errl Live Studio editor with HTML/CSS/JS preview, Monaco, asset manager, and SVG tooling.
              </p>
              <span class="studio-card__cta">Launch</span>
            </div>
          </a>

          <a class="studio-card__link" href="/studio/math-lab">
            <div class="studio-card">
              <div class="studio-card__header">
                <h3 class="studio-card__title">Psychedelic Math Lab</h3>
                <span class="studio-card__badge studio-card__badge--legacy">Legacy</span>
              </div>
              <p class="studio-card__description">
                100+ interactive math toys and shaders. Legacy experience; opens inside the React shell.
              </p>
              <span class="studio-card__cta">Launch</span>
            </div>
          </a>

          <a class="studio-card__link" href="/studio/shape-madness">
            <div class="studio-card">
              <div class="studio-card__header">
                <h3 class="studio-card__title">Shape Madness</h3>
                <span class="studio-card__badge studio-card__badge--legacy">Legacy</span>
              </div>
              <p class="studio-card__description">
                38+ generative shape experiments. Legacy bundle, launching in a dedicated view.
              </p>
              <span class="studio-card__cta">Launch</span>
            </div>
          </a>

          <a class="studio-card__link" href="/studio/pin-designer">
            <div class="studio-card">
              <div class="studio-card__header">
                <h3 class="studio-card__title">Pin Designer</h3>
                <span class="studio-card__badge studio-card__badge--legacy">Legacy</span>
              </div>
              <p class="studio-card__description">
                Design and export Errl pins. We’ll merge this into the shared asset pipeline next.
              </p>
              <span class="studio-card__cta">Launch</span>
            </div>
          </a>
        </section>

        <section class="studio-roadmap">
          <h2 class="studio-roadmap__title">Roadmap</h2>
          <ul>
            <li>Unified asset browser so every tool can open, edit, and export the same files.</li>
            <li>Bridge Math Lab and Shape Madness into native React surfaces without losing legacy flair.</li>
            <li>One set of keyboard shortcuts, panels, and history across all Studio experiences.</li>
          </ul>
        </section>
      </div>
    </main>

    <script type="module" src="../../../../fx/errl-bg.ts"></script>
    <script type="module">
      if (window.ErrlBG && typeof ErrlBG.mount === "function") {
        ErrlBG.mount({ headerVariant: 1, basePath: "../../..", hud: true });
      }

      const env = (import.meta && import.meta.env) ? import.meta.env : {};
      const baseUrl = typeof env.BASE_URL === "string" ? env.BASE_URL : "/";
      const trimmed = baseUrl.endsWith("/") ? baseUrl.slice(0, -1) : baseUrl;
      const portalBase = `${trimmed || ""}/legacy/portal`.replace(/^\/{2}/, "/");

      document.querySelectorAll("[data-portal-link]").forEach((el) => {
        const target = el.getAttribute("data-portal-link");
        if (target) el.setAttribute("href", `${portalBase}/${target}`);
      });
    </script>
  </body>
</html>
