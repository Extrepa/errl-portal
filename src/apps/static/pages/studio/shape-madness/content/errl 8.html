<!doctype html><meta charset="utf-8"><title>Beat-Reactive Spectrum</title>
<style>html,body{height:100%;margin:0;background:#050816;display:grid;place-items:center;color:#eaf7ff;font-family:system-ui}</style>
<canvas id=c width=800 height=420 style="border:1px solid #22306b;border-radius:10px;background:#0b1336"></canvas>
<script>(async function(){const ctx=new (window.AudioContext||window.webkitAudioContext)();let src;try{const s=await navigator.mediaDevices.getUserMedia({audio:true});src=ctx.createMediaStreamSource(s)}catch(e){const o=ctx.createOscillator();o.frequency.value=90;o.start();src=o}const an=ctx.createAnalyser();an.fftSize=2048;src.connect(an);an.connect(ctx.destination);const c=document.getElementById('c'),k=c.getContext('2d');const bins=an.frequencyBinCount;const data=new Uint8Array(bins);let ema=0;function loop(t){an.getByteFrequencyData(data);const energy=data.slice(0,140).reduce((a,b)=>a+b,0)/140/255;ema=ema*.85+energy*.15;const beat=energy>(ema*1.25+0.02);k.clearRect(0,0,c.width,c.height);for(let i=0;i<240;i++){const v=data[i]/255,x=i*(c.width/240),h=v*c.height;k.fillStyle=`hsl(${(i*2+t/10)%360} 90% 60%)`;k.fillRect(x,c.height-h,(c.width/240)-2,h)}if(beat){k.strokeStyle="#7cf0ff";k.lineWidth=6;k.strokeRect(6,6,c.width-12,c.height-12)}requestAnimationFrame(loop)}loop(0)})()</script>