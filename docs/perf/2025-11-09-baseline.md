# Baseline: Safari Layers — Errl Portal Landing (2025-11-09)

This document captures the initial baseline before changes.

- URL: http://localhost:5173/
- Browser: Safari Web Inspector → Layers (3D), Graphics, Timelines
- Screenshots: (cleared 2025-11-11). Add new captures in a fresh dated folder under `docs/perf/` when re-running the audit.

## Summary
- Layer Count: ~27
- Graphics Memory: ~418.4 MB
- Heaviest layers: several “Unknown node” entries with 10–16 paints and 2.0–13.6 MB each
- 3D view: many long stacked ribbons indicating repeated compositing contexts across wide surfaces

## Inventory snippets (paste results below)

```js
[...document.querySelectorAll('canvas')].map(c => ({
  id: c.id, z: getComputedStyle(c).zIndex,
  pe: getComputedStyle(c).pointerEvents,
  sz: `${c.width}x${c.height}`, cssSz: `${c.clientWidth}x${c.clientHeight}`
}));
```

```js
(() => {
  const cs = [...document.querySelectorAll('canvas')];
  const tryCtx = (c, kind) => { try { return !!c.getContext(kind, {preserveDrawingBuffer:false}); } catch(e){ return false; } };
  return {
    canvases: cs.length,
    webgl2: cs.filter(c => tryCtx(c,'webgl2')).length,
    webgl:  cs.filter(c => tryCtx(c,'webgl')).length,
  };
})();
```

```js
[...document.querySelectorAll('#bgParticles,#errlWebGL,#riseBubbles,.scene-layer,.vignette-frame')]
  .map(n => ({ node: n.id || n.className, z: getComputedStyle(n).zIndex, pos: getComputedStyle(n).position, filt: getComputedStyle(n).filter, mix: getComputedStyle(n).mixBlendMode }));
```

## Notes
- Record “Reasons for compositing” tooltips for the heaviest layers.
- Capture Timelines frame-rate spikes and correlate with layer paints.

## Attachments
- See folder: (removed). Re-export before next measurement.
